I"Hñ<h4 id="table-of-contents">Table of Contents</h4>
<div class="toc"><ul class="toc-item"><li><span><a href="#1.-ì¹´ìš´íŠ¸-ì²˜ë¦¬" data-toc-modified-id="1.-ì¹´ìš´íŠ¸-ì²˜ë¦¬-1">1. ì¹´ìš´íŠ¸ ì²˜ë¦¬</a></span><ul class="toc-item"><li><span><a href="#1-1.-ë°”ì´ë„ˆë¦¬-ë³€í™˜" data-toc-modified-id="1-1.-ë°”ì´ë„ˆë¦¬-ë³€í™˜-1.1">1-1. ë°”ì´ë„ˆë¦¬ ë³€í™˜</a></span></li><li><span><a href="#1-2.-ì–‘ìí™”-ë˜ëŠ”-ë¹„ë‹" data-toc-modified-id="1-2.-ì–‘ìí™”-ë˜ëŠ”-ë¹„ë‹-1.2">1-2. ì–‘ìí™” ë˜ëŠ” ë¹„ë‹</a></span></li></ul></li><li><span><a href="#2.-ë¡œê·¸-ë³€í™˜" data-toc-modified-id="2.-ë¡œê·¸-ë³€í™˜-2">2. ë¡œê·¸ ë³€í™˜</a></span></li><li><span><a href="#3.-ë¡œê·¸-ë³€í™˜ì˜-ì—­í• " data-toc-modified-id="3.-ë¡œê·¸-ë³€í™˜ì˜-ì—­í• -3">3. ë¡œê·¸ ë³€í™˜ì˜ ì—­í• </a></span></li><li><span><a href="#4.-ê±°ë“­ì œê³±-ë³€í™˜-:-ë¡œê·¸-ë³€í™˜ì˜-ì¼ë°˜í™”" data-toc-modified-id="4.-ê±°ë“­ì œê³±-ë³€í™˜-:-ë¡œê·¸-ë³€í™˜ì˜-ì¼ë°˜í™”-4">4. ê±°ë“­ì œê³± ë³€í™˜ : ë¡œê·¸ ë³€í™˜ì˜ ì¼ë°˜í™”</a></span></li></ul></div>

<p>ë³¸ í¬ìŠ¤íŒ…ì€ ã€Feature Engineering for Machine Learning - PRRINCIPLES AND TECHNIQUES FOR DATA SCIENTISTSã€ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ êµ¬ì„±í•˜ì˜€ìœ¼ë©° ì €ì˜ ì£¼ê´€ì ì¸ ìƒê°ê³¼ ê²¬í•´ê°€ í•¨ê»˜ ì„œìˆ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ì‚¬ì „ ì‘ì—…
</span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">warnings</span><span class="p">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s">'ignore'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'axes.unicode_minus'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span> 
<span class="n">plt</span><span class="p">.</span><span class="n">rc</span><span class="p">(</span><span class="s">'font'</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s">'Malgun Gothic'</span><span class="p">)</span> 
</code></pre></div></div>

<p><br /></p>

<hr />

<h3 id="1-ì¹´ìš´íŠ¸-ì²˜ë¦¬">1. ì¹´ìš´íŠ¸ ì²˜ë¦¬</h3>

<p>ì•„ë¬´ëŸ° ì œì•½ ì—†ì´ ë¹ ë¥´ê²Œ ëˆ„ì ë˜ëŠ” <code class="language-plaintext highlighter-rouge">ì¹´ìš´íŠ¸(count)</code>ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë³€í™˜ ìˆ˜ë‹¨ë“¤ì´ ìƒê°ë˜ì–´ ì§ˆ ìˆ˜ ìˆë‹¤.</p>
<ul>
  <li>ë°ì´í„°ë¥¼ ì›ì‹œ ìˆ«ìë¡œ ìœ ì§€í•˜ëŠ” ìˆ˜ë‹¨</li>
  <li>ì¡´ì¬ ì—¬ë¶€ë§Œì„ ë‚˜íƒ€ë‚´ëŠ” binaryë¡œ ë³€í™˜í•˜ëŠ” ìˆ˜ë‹¨</li>
  <li>ëª‡ ê°œì˜ êµ¬ê°„ìœ¼ë¡œ ë¶„í• í•˜ëŠ” ìˆ˜ë‹¨</li>
</ul>

<p>ì´ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ëª‡ ê°€ì§€ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.</p>

<p><br /></p>

<h4 id="1-1-ë°”ì´ë„ˆë¦¬-ë³€í™˜">1-1. ë°”ì´ë„ˆë¦¬ ë³€í™˜</h4>

<p>ë‹¤ìŒ ë°ì´í„°ì…‹ì€ ì‚¬ìš©ì ID, ê³¡ ID, ì¬ìƒ ì¹´ìš´íŠ¸ë¼ëŠ” ì„¸ ê°€ì§€ ê°’ìœ¼ë¡œ ì´ë¤„ì§„ ë°ì´í„°(4,800ë§Œê±´ ì´ìƒ)ì´ë‹¤. í•´ë‹¹ ë°ì´í„°ì—ì„œ ì‚¬ìš©ì ì„ í˜¸ë„ì— ëŒ€í•œ í‘œí˜„ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ë°”ì´ë„ˆë¦¬í™”(binarization)</code>í•´ì„œ 1ë³´ë‹¤ í° ëª¨ë“  ì¬ìƒ ì¹´ìš´íŠ¸ë¥¼ 1ë¡œ ê³ ì •ì‹œì¼œë³´ì.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="n">listen_count</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./example_data/train_triplets.txt.zip'</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s">'</span><span class="se">\t</span><span class="s">'</span><span class="p">)</span>
<span class="n">listen_count</span><span class="p">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'user_id'</span><span class="p">,</span> <span class="s">'sound_track_num'</span><span class="p">,</span> <span class="s">'play_count'</span><span class="p">]</span>
<span class="c1"># ê·¼ë° ì´ˆë°˜ ì˜ˆì‹œì˜ play_countê°€ ëŒ€ë¶€ë¶„ 1ì¸ì ì´ ì¢€ ì•„ì‰½ë‹¤. (ì„¤ëª…ì„ ìœ„í•œ ë¶€ë¶„ì—ì„œ)
</span><span class="n">listen_count</span><span class="p">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>sound_track_num</th>
      <th>play_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOAKIMP12A8C130995</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOAPDEY12A81C210A9</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOBBMDR12A8C13253B</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOBFNSP12AF72A0E22</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOBFOVM12A58A7D494</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>

<p>í•´ë‹¹ í…Œì´ë¸”ì—ì„œëŠ” ì¬ìƒ ì¹´ìš´íŠ¸ê°€ 0ì´ ì•„ë‹Œ ê²ƒë“¤ë§Œ í¬í•¨ë˜ì—ˆê¸° ë•Œë¬¸ì— play_countì—´ì„ ëª¨ë‘ 1ë¡œ ë§Œë“¤ë©´ëœë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">listen_count</span><span class="p">[</span><span class="s">'play_count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">listen_count</span><span class="p">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>sound_track_num</th>
      <th>play_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOAKIMP12A8C130995</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOAPDEY12A81C210A9</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOBBMDR12A8C13253B</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOBFNSP12AF72A0E22</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>
      <td>SOBFOVM12A58A7D494</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>

<p>ë°”ì´ë„ˆë¦¬ ëª©í‘œ ë³€ìˆ˜ëŠ” ì‚¬ìš©ì ì„ í˜¸ë„ì— ëŒ€í•œ ë‹¨ìˆœí•˜ë©´ì„œë„ ê²¬ê³ í•œ ì²™ë„ê°€ ë  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<h4 id="1-2-ì–‘ìí™”-ë˜ëŠ”-ë¹„ë‹">1-2. ì–‘ìí™” ë˜ëŠ” ë¹„ë‹</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">biz_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'./example_data/archive/yelp_academic_dataset_business.json'</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s">'utf-8-sig'</span><span class="p">)</span>
<span class="n">blz_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">biz_file</span><span class="p">.</span><span class="n">readlines</span><span class="p">()])</span>
<span class="n">biz_file</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">blz_df</span><span class="p">.</span><span class="n">columns</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Index(['business_id', 'name', 'address', 'city', 'state', 'postal_code',
       'latitude', 'longitude', 'stars', 'review_count', 'is_open',
       'attributes', 'categories', 'hours'],
      dtype='object')
</code></pre></div></div>

<p>í˜„ì¬ ê°€ì ¸ì˜¨ Yelp ë°ì´í„°ì…‹ì€ ë¶ì•„ë©”ë¦¬ì¹´ì™€ ìœ ëŸ½ì˜ ì—´ ê°œ ë„ì‹œì— ìˆëŠ” ë‹¤ì–‘í•œ ë¹„ì¦ˆë‹ˆìŠ¤ì— ëŒ€í•œ ì‚¬ìš©ìì˜ ë¦¬ë·°ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤. ì´ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ <u>ì‚¬ìš©ìê°€ í•œ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì¤„ ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” ë“±ê¸‰</u>ì„ ì˜ˆì¸¡í•œë‹¤ëŠ” í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤ ê°€ì •í–ˆì„ ë•Œ, <code class="language-plaintext highlighter-rouge">ì›ì‹œ ë¦¬ë·° ì¹´ìš´íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ê²ƒ</code>ì¸ì§€ ì•„ë‹ˆë©´ <code class="language-plaintext highlighter-rouge">ì¶”ê°€ì ì¸ ì²˜ë¦¬ê°€ í•„ìš”í•  ê²ƒ</code>ì¸ì§€ì— ê´€í•´ì„œ ê³ ë¯¼í•´ë³´ì.</p>

<p><br /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">plt</span><span class="p">.</span><span class="n">hist</span><span class="p">(</span><span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'ë¦¬ë·° ì¹´ìš´íŠ¸'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'ë°œìƒ ê±´ìˆ˜'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">yscale</span><span class="p">(</span><span class="s">'log'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/53929665/107151674-1eac5f00-69a7-11eb-940e-32bf7ef36080.png" alt="FE_chapter2-2_14_0" /></p>

<p>ìœ„ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ë·° ì¹´ìš´íŠ¸ì— ëŒ€í•œ íˆìŠ¤í† ê·¸ë¨ì´ë‹¤. ìœ„ì™€ ê°™ì€ ì—¬ëŸ¬ ìë¦¿ìˆ˜ì— ê±¸ì³ í­ë„“ê²Œ í¼ì³ì ¸ ìˆëŠ” ì›ì‹œ ì¹´ìš´íŠ¸ ê°’ì€ ë§ì€ ëª¨ë¸ì—ì„œ ë§ì€ ë¬¸ì œë¥¼ ì•¼ê¸° í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <u>ë°ì´í„° ë²¡í„°ì—ì„œ í° ê°’ì„ ê°–ëŠ” í•˜ë‚˜ì˜ ìš”ì†ŒëŠ” ë‹¤ë¥¸ ëª¨ë“  ìš”ì†Œë“¤ì˜ ìœ ì‚¬ë„ ë³´ë‹¤ ë” í° ì˜í–¥ë ¥ì„ ê°–ê¸° ë•Œë¬¸ì— ì „ì²´ì ìœ¼ë¡œ ìœ ì‚¬ë„ ì¸¡ì •ê°’ì„ ì™œê³¡ ì‹œí‚¬ ìˆ˜ ìˆë‹¤</u>.</p>

<p><br /></p>

<p>ì´ì— ëŒ€í•œ í•´ê²°ì±…ìœ¼ë¡œ ì¹´ìš´íŠ¸ë¥¼ <u>ì—°ì†ì ì¸ ìˆ˜ë¥¼ ì¼ì •í•œ í­ì„ ê°–ëŠ” ë¶ˆì—°ì†ì ì¸ ì´ì‚°í™”ëœ ê°’ìœ¼ë¡œ ë§¤í•‘</u>í•˜ëŠ” <code class="language-plaintext highlighter-rouge">ì–‘ìí™”(quantization)</code>ì‹œì¼œ binìœ¼ë¡œ ê·¸ë£¹í™”í•˜ëŠ” ê²ƒì´ë‹¤.</p>

<p><br /></p>

<p>ë°ì´í„°ë¥¼ <code class="language-plaintext highlighter-rouge">ì–‘ìí™”</code>í•˜ê¸° ìœ„í•´ì„œëŠ” ê° binì˜ ë„ˆë¹„ë¥¼ ê²°ì •í•´ì•¼ í•œë‹¤. ì´ë¥¼ ìœ„í•œ ê¸°ë²•ë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
  <li><strong>(ê³ ì • í­ ë°©ì‹ ä¸­) Fixed-width binning</strong>
    <ul>
      <li>ê° ë¹ˆì€ <u>íŠ¹ì • ë²”ìœ„ì˜ ìˆ˜</u>ë¥¼ í¬í•¨í•œë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">ë²”ìœ„</code>ëŠ” <u>ì‚¬ìš©ìê°€ ì •ì˜</u>í•˜ê±°ë‚˜ <u>ì„ í˜•/ì§€ìˆ˜ ìŠ¤ì¼€ì¼</u>ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</li>
      <li>ì‚¬ìš©ì ì •ì˜ ì˜ˆì‹œ) bin1 : 0-9ì„¸, bin2 : 10-19ì„¸, â€¦ (10ë…„ ë‹¨ìœ„ë¡œ ê·¸ë£¹)<br />ì„ í˜•/ì§€ìˆ˜ ì„¤ì • ì˜ˆì‹œ) 0-9, 10-99, 100-999, 1000-9999, â€¦ (10ì˜ ì œê³±ìœ¼ë¡œ ê·¸ë£¹)</li>
    </ul>
  </li>
  <li><strong>(ì ì‘í˜• ë°©ì‹ ä¸­) Quantile binning</strong>
    <ul>
      <li>ì¹´ìš´íŠ¸ ì‚¬ì´ì— í° ê°­ì´ ìˆì„ ê²½ìš° Fixed-width binningì€ ë°ì´í„°ê°€ ì—†ëŠ” binì„ ë§ì´ ìƒì„±í•œë‹¤. ì´ ë¬¸ì œëŠ” ë°ì´í„°ì˜ ë¶„í¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ binì„ ìœ ë™ì (adaptively)ìœ¼ë¡œ Quantile binningì„ ì´ìš©í•˜ì—¬ ë°°ì¹˜í•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<p>ì˜ˆì œì—ì„œ <code class="language-plaintext highlighter-rouge">Fixed-width binning</code>ì™€ <code class="language-plaintext highlighter-rouge">Quantile binning</code>ì„ í™•ì¸í•´ë³´ì</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Fixed_width binning ì¹´ìš´íŠ¸ ì–‘ìí™”
</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">small_counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; (1) 0-99 ì‚¬ì´ì—ì„œ 20ê°œì˜ ë¬´ì‘ìœ„ ì •ìˆ˜ ìƒì„± :'</span><span class="p">,</span> <span class="n">small_counts</span><span class="p">,</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>


<span class="c1"># 10ìœ¼ë¡œ ë‚˜ëˆ„ê¸° í•´ì„œ ë™ì¼í•œ êµ¬ê°„ì„ ê°–ëŠ” ë¹ˆ 0-9 ë§¤í•‘
</span><span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; (1) 10ìœ¼ë¡œ ë‚˜ëˆ  bin 0-9ë¡œ ë§¤í•‘ :'</span><span class="p">,</span><span class="n">np</span><span class="p">.</span><span class="n">floor_divide</span><span class="p">(</span><span class="n">small_counts</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

<span class="n">large_counts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">295</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span> <span class="mi">1523</span><span class="p">,</span> <span class="mi">1423</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">1523</span><span class="p">,</span> <span class="mi">612398</span><span class="p">,</span> <span class="mi">123498</span><span class="p">,</span> <span class="mi">4231123</span><span class="p">,</span> <span class="mi">523</span><span class="p">,</span> <span class="mi">2431</span><span class="p">,</span> <span class="mi">1523</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; (2) ì—¬ëŸ¬ ìë¦¿ìˆ˜ì— ê±¸ì³ ìˆëŠ” ì¹´ìš´íŠ¸ ë°°ì—´ ìƒì„± :'</span><span class="p">,</span> <span class="n">large_counts</span><span class="p">,</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

<span class="c1"># ë¡œê·¸ í•¨ìˆ˜ë¥¼ í†µí•´ ì§€ìˆ˜ í­ ë¹ˆì— ë§¤í•‘
</span><span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; (2) ë¡œê·¸í•¨ìˆ˜ë¥¼ ì´ìš©í•´ binì— ë§¤í•‘ :'</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="n">large_counts</span><span class="p">)))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; (1) 0-99 ì‚¬ì´ì—ì„œ 20ê°œì˜ ë¬´ì‘ìœ„ ì •ìˆ˜ ìƒì„± : [51  8 56 23 52 34 60 90 83 82 52 24 13 36  9  8 43 60 42 74] 

&gt;&gt;&gt; (1) 10ìœ¼ë¡œ ë‚˜ëˆ  bin 0-9ë¡œ ë§¤í•‘ : [5 0 5 2 5 3 6 9 8 8 5 2 1 3 0 0 4 6 4 7] 

&gt;&gt;&gt; (2) ì—¬ëŸ¬ ìë¦¿ìˆ˜ì— ê±¸ì³ ìˆëŠ” ì¹´ìš´íŠ¸ ë°°ì—´ ìƒì„± : [295, 1234, 1523, 1423, 16, 1523, 612398, 123498, 4231123, 523, 2431, 1523] 

&gt;&gt;&gt; (2) ë¡œê·¸í•¨ìˆ˜ë¥¼ ì´ìš©í•´ binì— ë§¤í•‘ : [ 5.  7.  7.  7.  2.  7. 13. 11. 15.  6.  7.  7.]
</code></pre></div></div>

<p><br /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Quantile binning ì¹´ìš´íŠ¸ ì–‘ìí™”
</span>
<span class="n">deciles</span> <span class="o">=</span> <span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">].</span><span class="n">quantile</span><span class="p">([.</span><span class="mi">1</span><span class="p">,</span> <span class="p">.</span><span class="mi">2</span><span class="p">,</span> <span class="p">.</span><span class="mi">3</span><span class="p">,</span> <span class="p">.</span><span class="mi">4</span><span class="p">,</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="p">.</span><span class="mi">6</span><span class="p">,</span> <span class="p">.</span><span class="mi">7</span><span class="p">,</span> <span class="p">.</span><span class="mi">8</span><span class="p">,</span> <span class="p">.</span><span class="mi">9</span><span class="p">])</span>
<span class="n">deciles_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">'ì‹­ë¶„ìœ„ ìˆ˜'</span><span class="p">:</span> <span class="p">[.</span><span class="mi">1</span><span class="p">,</span> <span class="p">.</span><span class="mi">2</span><span class="p">,</span> <span class="p">.</span><span class="mi">3</span><span class="p">,</span> <span class="p">.</span><span class="mi">4</span><span class="p">,</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="p">.</span><span class="mi">6</span><span class="p">,</span> <span class="p">.</span><span class="mi">7</span><span class="p">,</span> <span class="p">.</span><span class="mi">8</span><span class="p">,</span> <span class="p">.</span><span class="mi">9</span><span class="p">],</span> <span class="s">'review_count'</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">deciles</span><span class="p">)})</span>
<span class="n">deciles_df</span> <span class="o">=</span> <span class="n">deciles_df</span><span class="p">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">'ì‹­ë¶„ìœ„ ìˆ˜'</span><span class="p">)</span>
<span class="n">deciles_df</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>review_count</th>
    </tr>
    <tr>
      <th>ì‹­ë¶„ìœ„ ìˆ˜</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.1</th>
      <td>3.0</td>
    </tr>
    <tr>
      <th>0.2</th>
      <td>4.0</td>
    </tr>
    <tr>
      <th>0.3</th>
      <td>5.0</td>
    </tr>
    <tr>
      <th>0.4</th>
      <td>7.0</td>
    </tr>
    <tr>
      <th>0.5</th>
      <td>9.0</td>
    </tr>
    <tr>
      <th>0.6</th>
      <td>14.0</td>
    </tr>
    <tr>
      <th>0.7</th>
      <td>21.0</td>
    </tr>
    <tr>
      <th>0.8</th>
      <td>36.0</td>
    </tr>
    <tr>
      <th>0.9</th>
      <td>77.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>

<span class="n">sns</span><span class="p">.</span><span class="n">set_style</span><span class="p">(</span><span class="s">'whitegrid'</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">deciles</span><span class="p">:</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="n">handle</span><span class="p">],</span> <span class="p">[</span><span class="s">'delices'</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">'log'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s">'log'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Review Count'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Occurrence'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Text(0, 0.5, 'Occurrence')
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/53929665/107151678-1f44f580-69a7-11eb-8ad9-fc36a997034b.png" alt="FE_chapter2-2_20_1" /></p>

<p><br /></p>

<p>ë¶„ìœ„ìˆ˜ë¥¼ ê³„ì‚°í•˜ê³  ë°ì´í„°ë¥¼ ê° ë¹ˆì— ë§¤í•‘í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">padnas.DataFrame.quantile</code></li>
  <li><code class="language-plaintext highlighter-rouge">pandas.Series.quantile</code></li>
  <li><code class="language-plaintext highlighter-rouge">pandas.qcut</code> (**ë°ì´í„°ë¥¼ ì›í•˜ëŠ” ìˆ˜ ë§Œí¼ì˜ ë¶„ìœ„ë¥¼ ë§¤í•‘)</li>
</ul>

<p>ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="k">print</span><span class="p">(</span><span class="s">'ì‚¬ìš©ë  ë¦¬ìŠ¤íŠ¸ :'</span><span class="p">,</span> <span class="n">large_counts</span><span class="p">,</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

<span class="c1"># ì¹´ìš´íŠ¸ë¥¼ ì‚¬ë¶„ìœ„ìˆ˜ì™€ ë§¤í•‘
</span><span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; ì‚¬ë¶„ìœ„ ë§¤í•‘ :'</span><span class="p">,</span> <span class="n">pd</span><span class="p">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">large_counts</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

<span class="c1"># ë¶„ìœ„ìˆ˜ ê³„ì‚°
</span><span class="n">large_counts_series</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">Series</span><span class="p">(</span><span class="n">large_counts</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; ë¦¬ìŠ¤íŠ¸ë¥¼ í† ëŒ€ë¡œ ê° ë¶„ìœ„ìˆ˜ ê³„ì‚° :'</span><span class="p">)</span>
<span class="n">large_counts_series</span><span class="p">.</span><span class="n">quantile</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì‚¬ìš©ë  ë¦¬ìŠ¤íŠ¸ : [295, 1234, 1523, 1423, 16, 1523, 612398, 123498, 4231123, 523, 2431, 1523] 

&gt;&gt;&gt; ì‚¬ë¶„ìœ„ ë§¤í•‘ : [0 1 1 1 0 1 3 3 3 0 2 1] 

&gt;&gt;&gt; ë¦¬ìŠ¤íŠ¸ë¥¼ í† ëŒ€ë¡œ ê° ë¶„ìœ„ìˆ˜ ê³„ì‚° :





0.25     1056.25
0.50     1523.00
0.75    32697.75
dtype: float64
</code></pre></div></div>

<p><br /></p>

<hr />

<h3 id="2-ë¡œê·¸-ë³€í™˜">2. ë¡œê·¸ ë³€í™˜</h3>

<p>ì§€ìˆ˜ì˜ ì—­í•¨ìˆ˜ì¸ ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ” <code class="language-plaintext highlighter-rouge">ë¡œê·¸ ë³€í™˜</code>ì€ <code class="language-plaintext highlighter-rouge">ì§€ìˆ˜ í­ ë¹„ë‹</code>ê³¼ ë§¤ìš° ë°€ì ‘í•˜ê²Œ ê´€ë ¨ë˜ì–´ìˆë‹¤. base=10ì¸ logí•¨ìˆ˜ì˜ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ë²”ìœ„ë“¤ì„ ë§¤í•‘í•œë‹¤.</p>

<ul>
  <li>[1, 10] ë²”ìœ„ =&gt; [0, 1] ë²”ìœ„</li>
  <li>[10, 100] ë²”ìœ„ =&gt; [1, 2] ë²”ìœ„</li>
  <li>[100, 1000] ë²”ìœ„ =&gt; [2, 3] ë²”ìœ„</li>
</ul>

<p>ì´ì²˜ëŸ¼ ë¡œê·¸ í•¨ìˆ˜ëŠ” <u>í° ìˆ˜ì˜ ë²”ìœ„ë¥¼ ì••ì¶•</u>í•˜ê³  <u>ì‘ì€ ìˆ˜ì˜ ë²”ìœ„ë¥¼ í° ìˆ˜ì˜ ë²”ìœ„ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ í™•ì¥</u>í•œë‹¤.</p>

<p><br /></p>

<p>ë‹¤ìŒì˜ Yelp ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ë·° ì¹´ìš´íŠ¸ì— ë¡œê·¸ë³€í™˜ì„ ì´ìš©í•˜ê¸° ì „ê³¼ í›„ì˜ íˆìŠ¤í† ê·¸ë¨ì„ ì‚´í´ë³´ì.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'before log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'review_count'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Occurrence'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>


<span class="n">blz_df</span><span class="p">[</span><span class="s">'log_review_count'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">]</span> <span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">blz_df</span><span class="p">[</span><span class="s">'log_review_count'</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'after log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'log(review_count)'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Occurrence'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/53929665/107151679-1fdd8c00-69a7-11eb-9224-09d46970c8cb.png" alt="FE_chapter2-2_25_0" /></p>

<p>ì›ë³¸ ë¦¬ë·° ì¹´ìš´íŠ¸ì—ëŠ” ë‚®ì€ ì¹´ìš´íŠ¸ ì˜ì—­ì— ë§¤ìš° ì§‘ì¤‘ë˜ì–´ ìˆì§€ë§Œ, ë¡œê·¸ ë³€í™˜ì„ í•œ íˆìŠ¤í† ê·¸ë¨ì—ì„œëŠ” <u>ë‚®ì€ ìª½ì— ì§‘ì¤‘ë˜ëŠ” í˜„ìƒì´ ì¤„ì–´ë“¤ì—ˆìœ¼ë©°, xì¶• ë°©í–¥ìœ¼ë¡œ ë°ì´í„°ë“¤ì˜ ë¶„í¬ê°€ í¼ì³ì§€ëŠ” ê²ƒ</u>ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ë˜ ë‹¤ë¥¸ <a href="https://archive.ics.uci.edu/ml/datasets/online+news+popularity">ë°ì´í„°ì…‹</a>ì„ ë¡œë“œí•˜ì—¬ í™•ì¸í•´ë³´ì. (ì´ ë°ì´í„°ì…‹ì€ Mashableì‚¬ì—ì„œ ì•½ 2ë…„ê°„ ë°œí–‰í•œ 39797ê°œì˜ ë‰´ìŠ¤ê¸°ê°€ì‚¬ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©° ë¬´ë ¤ 60ê°œì˜ í”¼ì³ë¥¼ ê°€ì§€ê³  ìˆë‹¤.)</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./example_data/OnlineNewsPopularity.csv'</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">df</span><span class="p">[</span><span class="s">' n_tokens_content'</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Number of Words in Article'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Number of Articles'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'before log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s">'log_n_tokens_content'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">' n_tokens_content'</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'log_n_tokens_content'</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Log of Number of Words'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Number of Articles'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'after log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/53929665/107151680-1fdd8c00-69a7-11eb-93ef-55a7453a357d.png" alt="FE_chapter2-2_28_0" /></p>

<p>ìœ„ì˜ ê·¸ë¦¼ì€ í•´ë‹¹ ë°ì´í„°ì— ëŒ€í•œ ë¡œê·¸ ë³€í™˜ ì´ì „ê³¼ ì´í›„ì˜ íˆìŠ¤í† ê·¸ë¨ì´ë‹¤. ê¸¸ì´ê°€ 0ì¼ ë•Œì˜ ê¸°ì‚¬ë¥¼ ì œì™¸í•˜ë©´ <u>ë¡œê·¸ ë³€í™˜ ì´í›„ì˜ ë¶„í¬ê°€ ë” ê°€ìš°ì‹œì•ˆ ë¶„í¬ì™€ ìœ ì‚¬</u>í•˜ë‹¤.</p>

<p><br /></p>

<hr />

<h3 id="3-ë¡œê·¸-ë³€í™˜ì˜-ì—­í• ">3. ë¡œê·¸ ë³€í™˜ì˜ ì—­í• </h3>

<p>ë¡œê·¸ ë³€í™˜ì€ ì£¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ìƒí™©ì—ì„œ ìì£¼ ì“°ì¸ë‹¤.</p>
<ul>
  <li>ì°¨ì´ê°€ ê¸‰ê²©í•˜ê²Œ ë²Œì–´ì ¸ ê³¼ê±°/ë¹„êµ ë°ì´í„°ì™€ì˜ ì°¨ì´ë¥¼ ì‹œê°ì ìœ¼ë¡œ íŒŒì•…í•˜ê¸° ìœ„í•´ ì‚¬ìš©</li>
  <li>ì ˆëŒ€ì¹˜ê°€ ì•„ë‹Œ ë³€í™”ìœ¨ì„ í™•ì¸í•  ë•Œ ì‚¬ìš© (ì˜ˆë¥¼ ë“¤ìë©´ ì£¼ì‹ì´ ì´ì— ë¶€í•©í•œë‹¤.)</li>
</ul>

<p><br /></p>

<p>ê·¸ë ‡ë‹¤ë©´, <code class="language-plaintext highlighter-rouge">ì§€ë„í•™ìŠµ</code>ì—ì„œëŠ” ë¡œê·¸ ë³€í™˜ì´ ì–´ë–»ê²Œ ìˆ˜í–‰ë˜ëŠ”ì§€ë„ ì‚´í´ë³´ì. ì´ë¥¼ ìœ„í•´ ì•ì˜ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ ë¡œê·¸ ë³€í™˜ ì´ì „ê³¼ ì´í›„ì˜ í”¼ì²˜ë¥¼ ì‚¬ìš©í•´ì„œ ì„ í˜• íšŒê·€ ëª¨ë¸ì— ëŒ€í•œ êµì°¨ ê²€ì¦ì„ ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰í•œë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ë¡œê·¸ ë³€í™˜ëœ Yelp ë¦¬ë·° ì¹´ìš´íŠ¸ë¥¼ ì‚¬ìš©í•´ ë¹„ì¦ˆë‹ˆìŠ¤ì˜ í‰ê·  ë“±ê¸‰ ì˜ˆì¸¡
</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">linear_model</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">cross_val_score</span>

<span class="c1"># ë³€í™˜ ì „
</span><span class="n">m_orig</span> <span class="o">=</span> <span class="n">linear_model</span><span class="p">.</span><span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">scores_orig</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">m_orig</span><span class="p">,</span> <span class="n">blz_df</span><span class="p">[[</span><span class="s">'review_count'</span><span class="p">]],</span> <span class="n">blz_df</span><span class="p">[</span><span class="s">'stars'</span><span class="p">],</span> <span class="n">cv</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1"># ë³€í™˜ í›„
</span><span class="n">m_log</span> <span class="o">=</span> <span class="n">linear_model</span><span class="p">.</span><span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">scores_log</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">m_log</span><span class="p">,</span> <span class="n">blz_df</span><span class="p">[[</span><span class="s">'log_review_count'</span><span class="p">]],</span> <span class="n">blz_df</span><span class="p">[</span><span class="s">'stars'</span><span class="p">],</span> <span class="n">cv</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; for Yelp Data'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'R-squared score without log transform : %0.5f (+/- %0.5f)'</span><span class="o">%</span><span class="p">(</span><span class="n">scores_orig</span><span class="p">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">scores_orig</span><span class="p">.</span><span class="n">std</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'R-squared score with log transform : %0.5f (+/- %0.5f)'</span><span class="o">%</span><span class="p">(</span><span class="n">scores_log</span><span class="p">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">scores_log</span><span class="p">.</span><span class="n">std</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="se">\n\n</span><span class="s">'</span><span class="p">)</span>

<span class="c1"># ë³€í™˜ ì „
</span><span class="n">m_orig</span> <span class="o">=</span> <span class="n">linear_model</span><span class="p">.</span><span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">scores_orig</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">m_orig</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">' n_tokens_content'</span><span class="p">]],</span> <span class="n">df</span><span class="p">[</span><span class="s">' shares'</span><span class="p">],</span> <span class="n">cv</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1"># ë³€í™˜ í›„
</span><span class="n">m_log</span> <span class="o">=</span> <span class="n">linear_model</span><span class="p">.</span><span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">scores_log</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">m_log</span><span class="p">,</span> <span class="n">df</span><span class="p">[[</span><span class="s">'log_n_tokens_content'</span><span class="p">]],</span> <span class="n">df</span><span class="p">[</span><span class="s">' shares'</span><span class="p">],</span> <span class="n">cv</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'&gt;&gt;&gt; for Online News Popularity Data'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'R-squared score without log transform : %0.5f (+/- %0.5f)'</span><span class="o">%</span><span class="p">(</span><span class="n">scores_orig</span><span class="p">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">scores_orig</span><span class="p">.</span><span class="n">std</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'R-squared score with log transform : %0.5f (+/- %0.5f)'</span><span class="o">%</span><span class="p">(</span><span class="n">scores_log</span><span class="p">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">scores_log</span><span class="p">.</span><span class="n">std</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; for Yelp Data
R-squared score without log transform : 0.00239 (+/- 0.00160)
R-squared score with log transform : 0.00580 (+/- 0.00251)



&gt;&gt;&gt; for Online News Popularity Data
R-squared score without log transform : -0.00242 (+/- 0.00509)
R-squared score with log transform : -0.00114 (+/- 0.00418)
</code></pre></div></div>

<p>ë¨¼ì € Yelpë°ì´í„°ì™€ Newsë°ì´í„°ì—ì„œ ëª¨ë‘ ë¡œê·¸ë¥¼ ì ìš©í•˜ê¸° ì „ê³¼ í›„ ë˜‘ê°™ì´ ì„±ëŠ¥ì´ ì¢‹ì§€ëŠ” ëª»í•˜ì§€ë§Œ, ë‘ ë°ì´í„°ì…‹ ëª¨ë‘ logë¥¼ ì ìš©í•œ í›„ì— ì ìˆ˜ê°€ í–¥ìƒí•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ì´ì²˜ëŸ¼ <code class="language-plaintext highlighter-rouge">ë¡œê·¸ ë³€í™˜</code>ì´ íš¨ê³¼ì ìœ¼ë¡œ ì‘ìš©í•œ ì´ìœ ëŠ” ì•„ë˜ì˜ ì˜ˆì œë¥¼ í†µí•´ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig2</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">ax1</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">' n_tokens_content'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">' shares'</span><span class="p">])</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'before log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Number of Words in Article'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Number of Shares'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="mi">200000</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">'--'</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">688</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">'--'</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">)</span>

<span class="n">ax2</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'log_n_tokens_content'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">' shares'</span><span class="p">])</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'after log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Log of Number of Words in Article'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Number of Shares'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="mi">200000</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">'--'</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="mi">688</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">'--'</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/53929665/107151681-20762280-69a7-11eb-8f05-f887207cbe45.png" alt="FE_chapter2-2_35_0" /></p>

<p>ìœ„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´, <code class="language-plaintext highlighter-rouge">ë¡œê·¸ ë³€í™˜</code>ì€ ê³µìœ  íšŸìˆ˜ 200000 ì´ìƒì¸ articleë“¤ì´ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŠ” <u>ì…ë ¥ í”¼ì²˜ ê³µê°„ì˜ ë‚®ì€ ìª½ì— ì„ í˜• ëª¨ë¸ì´ ìˆ¨ì‰´ ìˆ˜ ìˆëŠ” ê³µê°„ì„ ì œê³µ</u>í•œë‹¤. í•˜ì§€ë§Œ, <code class="language-plaintext highlighter-rouge">ë¡œê·¸ ë³€í™˜ì„ í•˜ì§€ ì•Šì€</code> íˆìŠ¤í† ê·¸ë¨ê³¼ ê°™ì€ ë°ì´í„°ì— ì„ í˜• ëª¨ë¸ì„ ì ìš©í•˜ê²Œ ë  ê²½ìš° ì…ë ¥ í”¼ì²˜ì˜ ì‘ì€ ë³€í™”ì—ë„ ë‹¤ë¥¸ íƒ€ê¹ƒê°’ì— í”¼íŒ…ë˜ì–´ ë²„ë¦´ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ìœ„ì˜ ê²°ê³¼ë¥¼ Yelp ë¦¬ë·° ë°ì´í„° ì…‹ì— ì ìš©í•œ ì‚°ì ë„ì™€ ë¹„êµí•´ë³´ì.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">ax1</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">],</span> <span class="n">blz_df</span><span class="p">[</span><span class="s">'stars'</span><span class="p">])</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'before log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Review Count'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Average Star Rating'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>

<span class="n">ax2</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">blz_df</span><span class="p">[</span><span class="s">'log_review_count'</span><span class="p">],</span> <span class="n">blz_df</span><span class="p">[</span><span class="s">'stars'</span><span class="p">])</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'after log'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Review Count'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Average Star Rating'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/53929665/107151682-210eb900-69a7-11eb-86b7-4213cdf5f986.png" alt="FE_chapter2-2_39_0" /></p>

<p><u>ë§ì€ ë¦¬ë·° ì¹´ìš´íŠ¸ê°€ ë†’ì€ í‰ê·  ë³„ì ê³¼ ìƒê´€ê´€ê³„</u>ë¥¼ ê°€ì§€ê¸°ëŠ” í•˜ì§€ë§Œ <code class="language-plaintext highlighter-rouge">ì„ í˜•</code>ì´ë¼ê³ ëŠ” ë³¼ ìˆ˜ ì—†ë‹¤. <u>ì™œëƒí•˜ë©´ ë‘ ì…ë ¥ ì¤‘ í•˜ë‚˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í‰ê·  ë³„ì ì„ ì˜ˆì¸¡í•˜ëŠ” ì„ ì„ ë¶„ëª…í•˜ê²Œ ë‚˜íƒ€ë‚¼ ë°©ë²•ì´ ì—†ê¸° ë•Œë¬¸ì´ë‹¤</u>. ë”°ë¼ì„œ, ë¡œê·¸ë¥¼ ì·¨í•˜ë˜ ì•ˆì·¨í•˜ë˜ Yelpë°ì´í„°ì—ì„œ Review CountëŠ” Average Star Ratingì— ëŒ€í•´ ë‚˜ìœ ì„ í˜• ì˜ˆì¸¡ì ì„ì„ ë³´ì—¬ì¤€ë‹¤.</p>

<p><br /></p>

<hr />

<h3 id="4-ê±°ë“­ì œê³±-ë³€í™˜--ë¡œê·¸-ë³€í™˜ì˜-ì¼ë°˜í™”">4. ê±°ë“­ì œê³± ë³€í™˜ : ë¡œê·¸ ë³€í™˜ì˜ ì¼ë°˜í™”</h3>

<p><code class="language-plaintext highlighter-rouge">ê±°ë“­ì œê³± ë³€í™˜</code>ìœ¼ë¡œ ì•Œë ¤ì§„ ê¸°ë²• ì¤‘ í•˜ë‚˜ì¸ <code class="language-plaintext highlighter-rouge">ë¡œê·¸ ë³€í™˜</code>ì€ í†µê³„ ìš©ì–´ë¡œëŠ” <code class="language-plaintext highlighter-rouge">ë¶„ì‚° ì•ˆì •í™” ë³€í™˜(variance-stabilizing transformation)</code>ì´ë¼ í•œë‹¤.</p>

<p><br /></p>

<p>ê·¸ë ‡ë‹¤ë©´, <code class="language-plaintext highlighter-rouge">ë¶„ì‚° ì•ˆì •í™” ë³€í™˜</code>ì´ ì™œ ì¢‹ì€ ê²ƒì¼ê¹Œ? ê·¸ì— ëŒ€í•œ ë‹µì„ ì•Œê¸° ìœ„í•´ì„œëŠ” ê°„ë‹¨í•˜ê²Œë¼ë„ <code class="language-plaintext highlighter-rouge">í‘¸ì•„ì†¡ ë¶„í¬</code>ì„ ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤.</p>

<p><br /></p>

<p>ê°„ë‹¨í•˜ê²Œ <code class="language-plaintext highlighter-rouge">í‘¸ì•„ì†¡ ë¶„í¬</code>ë€?</p>
<ul>
  <li>
    <p>ë‹¨ìœ„ ì‹œê°„ ë‚´ì— ì–´ë–¤ ì‚¬ê±´ì´ ë°œìƒí•  íšŸìˆ˜ë¥¼ í™•ë¥ ë³€ìˆ˜ë¡œ ê°€ì§€ëŠ” í™•ë¥  ë¶„í¬<br />=&gt; ì–´ë–¤ ì‚¬ê±´ì´ ì¼ì–´ë‚  íšŸìˆ˜ì— ëŒ€í•œ ê¸°ëŒ“ê°’ì„ Î»ë¼ í•  ë•Œ , ê·¸ ì‚¬ê±´ì´ x ë²ˆ ë°œìƒí•  í™•ë¥ </p>
  </li>
  <li>
    <p>í‘¸ì•„ì†¡ ë¶„í¬ì˜ í™•ë¥ ë³€ìˆ˜ : ê¸°ëŒ“ê°’ = ë¶„ì‚° = Î»<br /> Î»â‡§ âˆ (ë¶„ì‚°â‡§ &amp; ê¼¬ë¦¬êµµê¸°â‡§)</p>
  </li>
  <li>
    <p>ì£¼ì˜) ì´ì‚°í˜• ë°ì´í„°ë¼ í•´ë„ ë¬´ì¡°ê±´ í¬ì•„ì†¡ ë¶„í¬ëŠ” ì•„ë‹ˆë‹¤!</p>
  </li>
</ul>

<p><br /></p>

<p>ìš°ì„  <code class="language-plaintext highlighter-rouge">ë¶„ì‚° ì•ˆì •í™” ë³€í™˜</code>ì˜ ëª©ì ì€ ì–´ë–¤ ë°ì´íƒ€ì…‹ì•ˆì— ìˆëŠ” ê°’ <code class="language-plaintext highlighter-rouge">x</code>ë¥¼ <u>ê·¸ ë°ì´í„°ì…‹ì˜ í‰ê· ê³¼ ê´€ë ¨ì—†ëŠ” ê°€ë³€ ë³€ìˆ˜</u> <code class="language-plaintext highlighter-rouge">y</code>(= f(x))ë¡œ ë§Œë“œëŠ” ê°„ë‹¨í•œ function <code class="language-plaintext highlighter-rouge">f</code>ë¥¼ ì°¾ê¸° ìœ„í•¨ì´ë‹¤.</p>

<p><br /></p>

<p>ì—¬ê¸°ì„œ ë§Œì•½ ë°ì´í„°ì…‹ì´ ì„œë¡œ ë‹¤ë¥¸ <code class="language-plaintext highlighter-rouge">í¬ì•„ì†¡ ë¶„í¬</code>ë¥¼ ê°€ì§„ë‹¤ê³  ìƒê°í•´ë³´ì(ì¦‰ ì„œë¡œë‹¤ë¥¸ ê¸°ëŒ“ê°’ Î»ë¥¼ ê°€ì§‘ë‹ˆë‹¤). ê·¸ëŸ¬ë©´ <code class="language-plaintext highlighter-rouge">í¬ì•„ì†¡ ë¶„í¬</code>ì˜ ê²½ìš° ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë“¯ì´ ë¶„ì‚°ì´ í‰ê· ê³¼ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— í‰ê· ì— ë”°ë¼ì„œ ë¶„ì‚°ì´ ë‹¬ë¼ì§ˆ ê²ƒì´ë‹¤. ë”°ë¼ì„œ ë°ì´í„°ì…‹ì€ <code class="language-plaintext highlighter-rouge">ì •ê·œë¶„í¬</code>ë¥¼ ë”°ë¥´ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì´ëŸ´ ê²½ìš°ì— ë°ì´í„°ì…‹ì„ <code class="language-plaintext highlighter-rouge">íšŒê·€ë¶„ì„</code>í•˜ê³ ì í•œë‹¤ë©´, <code class="language-plaintext highlighter-rouge">íšŒê·€ë¶„ì„</code>ì€ ì •ê·œì„± ê°€ì • í•˜ì—ì„œ ì„±ë¦½ë˜ê¸° ë•Œë¬¸ì— ë¹„ì •ê·œì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ê·¸ëŸ¬ë‚˜, ì—¬ê¸°ì— <code class="language-plaintext highlighter-rouge">ë¶„ì‚° ì•ˆì •í™” ë³€í™˜</code>ì´ ì ìš©ëœë‹¤ë©´</p>
<ul>
  <li><u>ë¶„ì‚°ì´ ë” ì´ìƒ í‰ê· ì— ì˜ì¡´í•˜ì§€ ì•Šê²Œ ëœë‹¤ëŠ” ì´ì </u>ì´ ìƒê¸¸ ë¿ë§Œ ì•„ë‹ˆë¼</li>
  <li><u>ë³€í™˜ë˜ì–´ì§„ ë³€ìˆ˜ì˜ ë¶„í¬ê°€ ì •ê·œë¶„í¬ì— ê°€ê¹ë„ë¡í•˜ëŠ” ì´ì </u>ë„ ê°€ì§„ë‹¤.</li>
</ul>

\[y = \sqrt{x} , y =\log{x}\]

<p><br /></p>

<p>ì œê³±ê·¼ ë³€í™˜ê³¼ ë¡œê·¸ ë³€í™˜ì˜ ê°€ì¥ ê°„ë‹¨í•œ ì¼ë°˜í™”ë¡œëŠ” <code class="language-plaintext highlighter-rouge">Box-Cox</code>ì´ ìˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/53929665/107151685-223fe600-69a7-11eb-9b74-ac81886825c9.png" alt="img" /></p>

<ul>
  <li>ë°ì´í„°ê°€ ì–‘ìˆ˜ì¼ ë•Œë§Œ ë™ì‘ (ì–‘ìˆ˜ê°€ ì•„ë‹Œ ë°ì´í„°ëŠ” ê³ ì •ëœ ìƒìˆ˜ë¥¼ ë”í•´ì¤Œìœ¼ë¡œì¨ ê°€ëŠ¥)</li>
  <li><code class="language-plaintext highlighter-rouge">SciPy</code>ì˜ <code class="language-plaintext highlighter-rouge">stats</code>íŒ¨í‚¤ì§€ì—ì„œ Box-Cox ë³€í™˜ì— ëŒ€í•œ êµ¬í˜„ ì œê³µ</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="c1"># ì…ë ¥ íŒŒë¼ë¯¸í„° lmbdaë¥¼ 0 ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ë¡œê·¸ ë³€í™˜ì„ í•œë‹¤. (ìƒìˆ˜ ì˜¤í”„ì…‹x)
</span><span class="n">rc_log</span> <span class="o">=</span> <span class="n">stats</span><span class="p">.</span><span class="n">boxcox</span><span class="p">(</span><span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">],</span> <span class="n">lmbda</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># SciPyì—ì„œ boxcox ë³€í™˜ì€ ì¶œë ¥ì„ ì •ê·œë¶„í¬ì— ê°€ì¥ ê°€ê¹ê²Œ ë§Œë“œëŠ”
# ëŒë‹¤íŒŒë¼ë¯¸í„°(ì•„ë˜ ì½”ë“œì—ì„œëŠ” bc_paramsì— ì €ì¥ë¨)ë¥¼ ìƒ‰ì¸í•œë‹¤.
# rc_bcì˜ ê²½ìš° ë³€í™˜ëœ ê°’ì´ ì €ì¥ëœë‹¤.
</span><span class="n">rc_bc</span><span class="p">,</span> <span class="n">bc_params</span> <span class="o">=</span> <span class="n">stats</span><span class="p">.</span><span class="n">boxcox</span><span class="p">(</span><span class="n">blz_df</span><span class="p">[</span><span class="s">'review_count'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'ì •ê·œë¶„í¬ì— ê°€ê¹ë„ë¡ í•˜ëŠ” Î» : '</span><span class="p">,</span> <span class="n">bc_params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'ë³€í™˜ëœ ê°’ : '</span><span class="p">,</span> <span class="n">rc_bc</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì •ê·œë¶„í¬ì— ê°€ê¹ë„ë¡ í•˜ëŠ” Î» :  -0.3528981448601063
ë³€í™˜ëœ ê°’ :  [2.03359708 1.09633902 1.22790118 ... 2.26975224 0.91069594 0.91069594]
</code></pre></div></div>

<p><br /></p>

<p>ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì›ë³¸ ë°ì´í„°, ë¡œê·¸ ë³€í™˜ëœ ë°ì´í„°, ê·¸ë¦¬ê³  Box_Coxë³€í™˜ëœ ë°ì´í„°ë¥¼ ë¹„êµí•˜ì—¬ ì‚´í´ë³¼ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<hr />

<h3 id="references">References</h3>

<ul>
  <li>Alice Zheng, Amanda Casari, ã€Feature Engineering for Machine Learning - PRRINCIPLES AND TECHNIQUES FOR DATA SCIENTISTSã€, Oâ€™Relly Media (2018)</li>
  <li><a href="https://archive.ics.uci.edu/ml/datasets/online+news+popularity">UCI</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Variance-stabilizing_transformation">wikipedia : variance-stabilizing-transformation</a></li>
</ul>

:ET