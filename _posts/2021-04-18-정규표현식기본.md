---
layout: post
title:  "Regular Expression Basic"
subtitle: "Regular Expression Basic"
categories: devlang
#tags: python
comments: true
---
#### Contents
[1. 앵커 (Anchor)](#앵커)
- ^ (캐럿, caret)
- $ (달러,  dollar)
- 앵커를 이용해서 완전일치 검사하기

[2. 메타 문자  (Metacharacters)](#메타-문자)
- . (점, dot)
- \| (세로선,  pipe)
-  \ (역슬래시, backslash)

[3. 괄호 및 수량사](#괄호-및-수량사)
- […]
- [^...]
- {...}
- (...)
- \*
- \?

[4.요약 문자 (Shorthand Character Classes)](#요약-문자)
- \w와  \W
- \s와 \S
- \d와 \D

<br>

---

###  앵커

#### ^ (캐럿, caret)
- Expression: `^[문자(열)]`
- Description : <br> 특정 문자로 시작되는 패턴을 가진 문자열들을 색인한다.
- Usage : <br> 만약 `^abc`로 색인할 경우, 다음의 문자열들이 색인된다.<br>ex) <b>abc</b>, <b>abc</b>d, <b>abc</b>english, <b>abc</b> Class

<br>

#### $ (달러, dollar)
- Expression: `[문자(열)]$`
- Description : <br> 특정 문자로 끝나는 패턴을 가진 문자열들을 색인한다.
- Usage : <br> 만약 `abc$`로 색인할 경우, 다음의 문자열들이 색인된다.<br>ex) <b>abc</b>, I can wirte <b>abc</b>, defg<b>abc</b>, Hellow <b>abc</b>

<br>

#### 앵커를 이용해서 완전일치 검사하기
특정 패턴과 완전히 일치하는 문자열을 색인하고 싶을 경우, 앵커 `$`와 `^`를 동시에 사용한다. 
- 예를 들어, `^abc$`을 abc로 시작해서 abc로 끝나는 경우임을 의미하기에 <b>abc</b>라는 문자열만 색인된다.
-  더불어, `^$`와 같이 사용할 경우, `빈문자열`이 색인된다.

<br>

---

###  메타 문자

#### . (점, dot)
- Expression:  `[문자(열)].[문자(열)]`
- Description :  <br>줄바꿈 문자를 제외한 <u>임의의 한 문자</u>를 가진 패턴을 색인한다.
- Usage : <br>만약 `a.c`로 색인할 경우, 다음의 문자열들이 색인된다.<br>ex) <b>a</b>d<b>c</b>, <b>a</b>1<b>c</b>, <b>a</b>a<b>c</b> (하지만, <b>a</b>123<b>c</b> 이런 문자열은 해당되지 않는다.)

<br>

#### | (세로선, pipe)
- Expression:  `[문자(열)]|[문자(열)]`
- Description : <br> 단순하게 <u>또는</u>을 의미한다. 
- Usage : <br>만약, `hello|hi`로 색인할 경우, 다음과 같은 문자열들이 색인된다.  <br> ex) 123<b>hello</b>4123, abc<b>hello</b>abc, 123<b>hi</b>4123, abc<b>hi</b>abc, <b>hello</b><b>hi</b>

<br>

#### \ (역슬래시, backslash)
- Expression:  `\[특수문자]`
- Description :  <br>특수 문자가 아닌 문자 그대로의 의미를 나타내는데 사용한다.
- Usage :  <br>예를들어, `.`은 위에서 정규표현식으로 적용되었지만,  `\.`로 표기할 경우 문자열에서 흔히 볼 수 있는 마침표에 해당한다.

<br>

---

###  괄호 및 수량사

#### [...]
- Expression:  사용예시 참조!
- Description : <br>문자 집합에 속한 문자들을 색인한다. `대시(-)`를 이용해서 첫 번째와 마지막 문자를 구분한다.
- Usage : 
	- `[123]` : 1 또는 2 또는 3 중에 하나를 색인한다.
	- `[a-f]` : a에서 f까지의 모든 문자를 색인한다. 

<br>

####  [^...] 
- Expression:  사용예시 참조!
- Description : <br> 문자 집합에 없는 모든 문자를 색인한다.
- Usage : 
	- `[^123]` : 1, 2, 3이 아닌 모든 문자열을 색인한다.
	- `[^a-f]` : a에서 f까지의 모든 문자가 아닌 문자열을 색인한다. 

<br>

|BigQuery <br>사용예시|<center>REGEXP_CONTAINS(value, '[a-f]')</center>| <center>REGEXP_CONTAINS(value, '[^a-f]')</center> |
|--|--|--|
|<center>1234</center>| `False` <br>a에서 f까지 이외의 문자로 이루어짐 | `True` <br>a에서 f까지 이외의 문자로 이루어짐 |
|<center>a</center>| `True` <br>a에서 f사이의 문자중 하나로 이루어짐  | `False` <br>a에서 f사이의 문자중 하나로 이루어짐 |
|<center>abcdef</center>| `True` <br>a에서 f까지의 문자로 이루어짐  | `False` <br>a에서 f까지의 문자로 이루어짐 |
|<center>abcdefg</center>| `True` <br>a에서 f사이의 문자 이외의 문자인 g가 있음 | `True` <br>a에서 f사이의 문자 이외의 문자인 g가 있음 |

<br>

#### {...}
- Expression:  `[문자(열)]{n, m}`
- Description : <br> 중괄호 앞에 위치한 문자열들(선행 표현식)을 최소 n번에서 최대 m번까지 가지는 문자열들을 색인한다.
- Usage : 
	- `ab{2, }` :  abb, abbb, abbb, ..., abbbbbbbbbbbbbbbbbbbbb
	- `ab{2, 5}` : abb, abbb, abbbb, abbbbb
	-  응용 [a-c]{2, 4} : aa, bb, cc, aabb, aabbcc, aaddcc <br> (즉, a혹은 b혹은 c인 문자가 최소 2번 최대 4번 연속으로 나열된 패턴을 가지는 문자열들만 색인, 따라서 affc같은건 매칭이안됨)

<br>

#### (...)
- Expression:  `[문자(열)](...)`
- Description : `()` 안에 있는 글자들을 그룹화한다.
- Usage :
	- `a(bc)` : abc, abcbc, abcbcbc, abcbcbcbc, ....


<br>

####  * (별표, Asterisk)
- Expression:  `[문자]*`
- Description :  <br> 선행 문자가 0번 이상 반복되는 모든 문자열을 색인한다. 만약 `*`가 아니라 `+`가 사용될 경우 0번을 제외한 1번 이상 반복되는 모든 문자열을 색인한다.
- Usage :
	-  bo`*`k  : bk,  bok, book, boook, booook, boooook, ..., boooooooooooook, ...
	- bo`+`k : ~~bk~~,  bok, book, boook, booook, boooook, ..., boooooooooooook, ...

<br>

#### ? (물음표, QM)
- Expression:  `[문자]?`
- Description : <br>선행 문자가 0번 또는 1번 위치한 패턴을 색인한다. `{0,1}` 범위와 같다.
- Usage :
	- <b>colo</b>`?`r의 경우 color 혹은 colo<b>u</b>r가  이에 해당된다.

<br>

---
###  요약 문자

#### \w와 \W

- `\w` : 문자, 숫자, 혹은 밑줄을 가진 문자열을 색인한다.
- `\W` : 문자, 숫자, 혹은 밑줄을 가지지 않은 문자열을 색인한다.
 
| \w | \W |
|:--:|:--:|
| [[:word:]] | [^ [:word:]]  |
| [A-Za-z0-9_] | [^A-Za-z0-9_] |

- 다른 문자(열)관련  요약 문자
	- `[[:alnum:]]` or `[A-Za-z0-9]` : <u>영숫자</u>를 가진 문자열을 색인한다.
	- `[[:alpha:]]` or `[A-Za-z]` : <u>영문자</u>를 가진 문자열을 색인한다.
	- `[[:upper:]]` or `[A-Z]` : <u>대문자</u>를 가지 문자열을 색인한다.
	- `[[:lower:]]` or `[a-z]` : <u>소문자</u>를 가지 문자열을 색인한다.
	
<br>

#### \s와 \S
- <u>공백, 탭 및 줄바꿈</u>을 비롯한 모든 <u>공백 문자</u>를가진 문자열을 색인한다.

|\s|\S|
|:--:|:--:|
|[[:space:]]|[^ [:space:]]|
|[ \t\r\n\v\f]|[^ \t\r\n\v\f]|

<br>

#### \d와 \D
- `\d` : <u>0-9사이의 숫자</u>를 가진 문자열을 색인한다.
- `\D` : <u>0-9사이의 숫자 외의</u> 문자를 가진 문자열을 색인한다. 

|\d|\D|
|:--:|:--:|
|[[:digit:]]|[^ [:digit:]]|
|[0-9]|[^0-9]|

<br>

---

### References

- [Google 정규표현식 document](https://support.google.com/a/answer/1371415?hl=ko)
- [re2 Wiki Github](https://github.com/google/re2/wiki/Syntax)
- [2innnnn0's velog](https://velog.io/@2innnnn0/%EB%B9%85%EC%BF%BC%EB%A6%ACbigquery-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D)

